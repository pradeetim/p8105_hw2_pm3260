---
title: "p8105_hw2_pm3260"
author: "Pradeeti Mainali"
date: "2024-10-02"
output: github_document
---

```{r setup, echo=FALSE, message=FALSE}
library(tidyverse)
library(readxl)
library(tidyr)
```

# Problem 1

```{r nyctransit}
nyc_df = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") |>
  janitor::clean_names() |>
  select(
    line, station_name, station_latitude, station_longitude,
    route1, route2, route3, route4, route5, route6, 
    route7, route8, route9, route10, route11, 
    entrance_type, entry, vending, ada) |>
  mutate(entry_logical = ifelse(entry == "YES", TRUE, FALSE))
```

The NYC Transit data frame contains the variables that describe routes, entry and entrance type, ADA compliance, station name/latitude/longitude, lines, and vending. 

So far, I have cleaned the names to make them all lower case and selected the variables above to remain in the data set.

The dimensions of this data set is 1868 rows and 20 columns. The data is NOT tidy. 

```{r stations, echo=FALSE, results='hide'}
distinct_stations = nyc_df |>
  distinct(station_name, line) |>
  nrow()

distinct_stations
```

There are 465 distinct stations. 

```{r ada, echo=FALSE, results='hide'}
ada_compliant = nyc_df |>
  filter(ada == TRUE) |>
  distinct(station_name, line) |>
  nrow()

ada_compliant
```

There are 84 ADA compliant stations.

```{r vending, echo=FALSE, results='hide'}
no_vending <- nyc_df |>
  filter(vending == "NO") |>
  summarise(proportion = mean(entry_logical, na.rm = TRUE)) |>
  pull(proportion)

no_vending
```

37% of station entrances/exits without vending allow entrance.

```{r}
```

# Problem 2

```{r mrtrash}
mrtrash_df = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
    range="A2:N587", 
    sheet = "Mr. Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    sports_balls = as.integer(
      round(sports_balls, 0)),
    year = as.numeric(year),
    trash_wheel = "Mr. Trash Wheel")
```


```{r proftrash}
proftrash_df = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
    range="A2:M109", 
    sheet = "Professor Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(trash_wheel = "Professor Trash Wheel")


```

```{r gwyntrash}
gwyntrash_df = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", 
    range="A2:L159", 
    sheet = "Gwynnda Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(trash_wheel = "Gwynnda Trash Wheel")

```

```{r}
trash_df =
  bind_rows(mrtrash_df, proftrash_df, gwyntrash_df)
```

The three data sets are from different sheets of the same excel file. They were imported so that the rows and columns all had data and then merged. Before the merge, a new variable to indicate which sheet they came from was added. 

After the merge in `trash_df`, there were 845 observations and 15 variables (`r paste(names(trash_df), collapse = ", ")`). 

The total weight of trash collected by Professor Trash Wheel was `r sum(pull(filter(trash_df, trash_wheel == "Professor Trash Wheel"), weight_tons), na.rm = TRUE)` tons. 

The total number of cigarette butts collected by Gwynnda in June of 2022 was `r format(sum(pull(filter(trash_df, trash_wheel == "Gwynnda Trash Wheel", month == "June", year == "2022"), cigarette_butts), na.rm = TRUE), scientific = FALSE)`.

# Problem 3

```{r bakers}
bakers_df = 
  read.csv("data/gbb_datasets/bakers.csv") |>
  janitor::clean_names()

```

```{r}
bakes_df = 
  read.csv("data/gbb_datasets/bakes.csv") |>
  janitor::clean_names()

```

```{r}
results_df = 
  read.csv("data/gbb_datasets/results.csv", skip=2) |>
  janitor::clean_names()
  

```


